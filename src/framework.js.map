{
  "version": 3,
  "sources": ["../js-framework/src/betterncm-api/react.ts", "../js-framework/src/betterncm-api/base.ts", "../js-framework/src/betterncm-api/index.ts", "../js-framework/src/loader.ts"],
  "sourcesContent": ["function initNCMReact() {\n\tif (\"React\" in window) {\n\t\tif (\"createElement\" in React && \"Fragment\" in React) {\n\t\t\twindow.h = React.createElement;\n\t\t\twindow.f = React.Fragment;\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn \"h\" in window && \"f\" in window;\n}\n\nconst reactHookTimer = setInterval(() => {\n\tif (initNCMReact()) {\n\t\tclearInterval(reactHookTimer);\n\t}\n}, 100);\n", "/** \u4E00\u4E2A\u7531 C++ \u4FA7\u8BBE\u7F6E\u7684\u8BBF\u95EE\u5BC6\u94A5\uFF0C\u4EE5\u514D\u51FA\u73B0\u975E\u6CD5\u8C03\u7528 */\ndeclare const BETTERNCM_API_KEY: string;\n\nconst BETTERNCM_API_PATH = \"http://localhost:3248/api\";\nconst BETTERNCM_FILES_PATH = \"http://localhost:3248/local\";\nexport const ncmFetch = (relPath: string, option?: RequestInit) => {\n\tif (option) {\n\t\toption.headers = option.headers || {};\n\t\toption.headers[\"BETTERNCM_API_KEY\"] = BETTERNCM_API_KEY;\n\t\treturn fetch(BETTERNCM_API_PATH + relPath, option);\n\t} else {\n\t\treturn fetch(BETTERNCM_API_PATH + relPath, {\n\t\t\theaders: { BETTERNCM_API_PATH },\n\t\t});\n\t}\n};\n", "/**\n * @fileoverview\n * BetterNCM \u63D2\u4EF6\u5F00\u53D1\u63A5\u53E3\n *\n * \u63D2\u4EF6\u4F5C\u8005\u53EF\u4EE5\u901A\u8FC7\u6B64\u5904\u7684\u63A5\u53E3\u6765\u548C\u754C\u9762\u6216\u7A0B\u5E8F\u5916\u90E8\u4EA4\u4E92\n */\n\nimport './react'\nimport { ncmFetch } from \"./base\";\n\nconst e = encodeURIComponent;\n\n/**\n * \u548C\u5916\u754C\u7684\u6587\u4EF6\u7CFB\u7EDF\u8FDB\u884C\u4EA4\u4E92\u7684\u63A5\u53E3\n */\nexport namespace fs {\n\t/**\n\t * \u5F02\u6B65\u8BFB\u53D6\u6307\u5B9A\u6587\u4EF6\u5939\u8DEF\u5F84\u4E0B\u7684\u6240\u6709\u6587\u4EF6\u548C\u6587\u4EF6\u5939\n\t * @param folderPath \u9700\u8981\u8BFB\u53D6\u7684\u6587\u4EF6\u5939\u8DEF\u5F84\n\t * @returns TODO: \u8FD4\u56DE\u7684\u5565\u73A9\u610F\n\t */\n\texport async function readDir(folderPath: string): Promise<string[]> {\n\t\tconst r = await ncmFetch(`/fs/read_dir?path=${e(folderPath)}`);\n\t\treturn await r.json();\n\t}\n\n\t/**\n\t * \u8BFB\u53D6\u6587\u672C\u6587\u4EF6\uFF0C\u52A1\u5FC5\u4FDD\u8BC1\u6587\u4EF6\u7F16\u7801\u662F UTF-8\n\t * @param filePath \u9700\u8981\u8BFB\u53D6\u7684\u6587\u4EF6\u8DEF\u5F84\n\t * @returns \u5BF9\u5E94\u6587\u4EF6\u7684\u6587\u672C\u5F62\u5F0F\n\t */\n\texport async function readFileText(filePath: string): Promise<string> {\n\t\tconst r = await ncmFetch(`/fs/read_dir?path=${e(filePath)}`);\n\t\treturn await r.text();\n\t}\n\n\t/**\n\t * \u89E3\u538B\u6307\u5B9A\u7684 ZIP \u538B\u7F29\u6587\u4EF6\u5230\u4E00\u4E2A\u6307\u5B9A\u7684\u6587\u4EF6\u5939\u4E2D\n\t * \u7531\u4E8E C++ \u4FA7\u6CA1\u6709\u5BF9\u662F\u5426\u89E3\u538B\u6210\u529F\u4E0E\u5426\u505A\u5224\u65AD\uFF0C\u6240\u4EE5\u8BF7\u81EA\u884C\u786E\u8BA4\u662F\u5426\u6B63\u786E\u89E3\u538B\u5230\u4E86\u76F8\u5E94\u4F4D\u7F6E\n\t * \uFF08\u4E0D\u8FC7\u5931\u8D25\u7684\u6982\u7387\u5E94\u8BE5\u4E0D\u5927\u5427\uFF09\n\t * @param zipPath \u9700\u8981\u89E3\u538B\u7684 ZIP \u538B\u7F29\u6587\u4EF6\u8DEF\u5F84\n\t * @param unzipDest \u9700\u8981\u89E3\u538B\u5230\u7684\u6587\u4EF6\u5939\u8DEF\u5F84\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\u5219\u4F1A\u521B\u5EFA\uFF0C\u5982\u679C\u89E3\u538B\u65F6\u6709\u6587\u4EF6\u5B58\u5728\u5219\u4F1A\u88AB\u8986\u76D6\n\t */\n\texport async function unzip(\n\t\tzipPath: string,\n\t\tunzipDest: string = `${zipPath}_extracted/`,\n\t) {\n\t\tconst r = await ncmFetch(\n\t\t\t`/fs/unzip_file?path=${e(zipPath)}&dest=${e(unzipDest)}`,\n\t\t);\n\t\treturn r.status === 200;\n\t}\n\n\t/**\n\t * \u5C06\u6587\u672C\u5199\u5165\u5230\u6307\u5B9A\u6587\u4EF6\u5185\n\t * \u7531\u4E8E C++ \u4FA7\u6CA1\u6709\u5BF9\u662F\u5426\u5199\u5165\u6210\u529F\u4E0E\u5426\u505A\u5224\u65AD\uFF0C\u6240\u4EE5\u8BF7\u81EA\u884C\u786E\u8BA4\u662F\u5426\u6B63\u786E\u5199\u5165\n\t * \uFF08\u4E0D\u8FC7\u5931\u8D25\u7684\u6982\u7387\u5E94\u8BE5\u4E0D\u5927\u5427\uFF09\n\t * @param filePath \u9700\u8981\u5199\u5165\u7684\u6587\u4EF6\u8DEF\u5F84\n\t * @param content \u9700\u8981\u5199\u5165\u7684\u6587\u4EF6\u5185\u5BB9\n\t */\n\texport async function writeFileText(filePath: string, content: string) {\n\t\tconst r = await ncmFetch(`/fs/write_file_text?path=${e(filePath)}`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: content,\n\t\t});\n\t\treturn r.status === 200;\n\t}\n\n\t/**\n\t * \u5C06\u6587\u672C\u6216\u4E8C\u8FDB\u5236\u6570\u636E\u5199\u5165\u5230\u6307\u5B9A\u6587\u4EF6\u5185\n\t * @param filePath \u9700\u8981\u5199\u5165\u7684\u6587\u4EF6\u8DEF\u5F84\n\t * @param content \u9700\u8981\u5199\u5165\u7684\u6587\u4EF6\u5185\u5BB9\n\t */\n\texport async function writeFile(filePath: string, content: string | Blob) {\n\t\tconst fd = new FormData();\n\t\tfd.append(\"file\", content);\n\t\tconst r = await ncmFetch(`/fs/write_file?path=${e(filePath)}`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: content,\n\t\t});\n\t\treturn r.status === 200;\n\t}\n\n\t/**\n\t * \u5728\u6307\u5B9A\u8DEF\u5F84\u65B0\u5EFA\u6587\u4EF6\u5939\n\t * \u7531\u4E8E C++ \u4FA7\u6CA1\u6709\u5BF9\u662F\u5426\u521B\u5EFA\u6210\u529F\u505A\u5224\u65AD\uFF0C\u6240\u4EE5\u9700\u8981\u81EA\u884C\u8C03\u7528 `betterncm.fs.exists()`\n\t * \u51FD\u6570\u786E\u8BA4\u662F\u5426\u6210\u529F\u521B\u5EFA\u3002\n\t * @param dirPath \u6587\u4EF6\u5939\u7684\u8DEF\u5F84\n\t * @see {@link exists}\n\t */\n\texport async function mkdir(dirPath: string) {\n\t\tconst r = await ncmFetch(`/fs/mkdir?path=${e(dirPath)}`);\n\t\treturn r.status === 200;\n\t}\n\n\t/**\n\t * \u68C0\u67E5\u6307\u5B9A\u8DEF\u5F84\u4E0B\u662F\u5426\u5B58\u5728\u6587\u4EF6\u6216\u6587\u4EF6\u5939\n\t * @param path \u6587\u4EF6\u6216\u6587\u4EF6\u5939\u7684\u8DEF\u5F84\n\t * @returns \u662F\u5426\u5B58\u5728\n\t */\n\texport async function exists(path: string): Promise<boolean> {\n\t\tconst r = await ncmFetch(`/fs/exists?path=${e(path)}`);\n\t\treturn await r.json();\n\t}\n\n\t/**\n\t * \u5220\u9664\u6307\u5B9A\u8DEF\u5F84\u4E0B\u7684\u6587\u4EF6\u6216\u6587\u4EF6\u5939\n\t * @param path \u6307\u5B9A\u7684\u6587\u4EF6\u6216\u6587\u4EF6\u5939\u8DEF\u5F84\n\t */\n\texport async function remove(path: string) {\n\t\tconst r = await ncmFetch(`/fs/remove?path=${e(path)}`);\n\t\treturn r.status === 200;\n\t}\n}\n\nexport namespace app {\n\t/**\n\t * \u6267\u884C\u6307\u5B9A\u7684\u7A0B\u5E8F\n\t * @param cmd \u9700\u8981\u6267\u884C\u7684\u6307\u4EE4\n\t * @param elevate \u662F\u5426\u4F7F\u7528\u7BA1\u7406\u5458\u6743\u9650\u8FD0\u884C\n\t * @param showWindow \u662F\u5426\u663E\u793A\u63A7\u5236\u53F0\u7A97\u53E3\n\t * @returns TODO: \u8FD4\u56DE\u7684\u5565\u73A9\u610F\n\t */\n\texport async function exec(cmd: string, elevate = false, showWindow = false) {\n\t\tconst r = await ncmFetch(\n\t\t\t`/app/exec${elevate ? \"_ele\" : \"\"}${showWindow ? \"?_showWindow\" : \"\"}`,\n\t\t\t{ method: \"POST\", body: cmd },\n\t\t);\n\t\treturn r.status === 200;\n\t}\n\n\tvar betterNCMVersion: string | null = null;\n\t/**\n\t * \u83B7\u53D6\u5F53\u524D BetterNCM \u7684\u7248\u672C\u53F7\n\t * @returns \u5F53\u524D BetterNCM \u7684\u7248\u672C\u53F7\n\t */\n\texport async function getBetterNCMVersion(): Promise<string> {\n\t\tif (betterNCMVersion === null) {\n\t\t\tconst r = await ncmFetch(\"/app/version\");\n\t\t\tbetterNCMVersion = await r.text();\n\t\t}\n\n\t\treturn betterNCMVersion;\n\t}\n\n\texport async function takeBackgroundScreenshot(): Promise<string> {\n\t\tconst r = await ncmFetch(\"/app/bg_screenshot\");\n\t\treturn await r.text();\n\t}\n\n\texport async function getNCMWinPos() {\n\t\tconst r = await ncmFetch(\"/app/get_win_position\");\n\t\treturn await r.json();\n\t}\n\n\texport async function reloadPlugins() {\n\t\tconst r = await ncmFetch(\"/app/reload_plugin\");\n\t\treturn r.status === 200;\n\t}\n\n\texport async function getDataPath() {\n\t\tconst r = await ncmFetch(\"/app/datapath\");\n\t\tconst p = await r.text();\n\t\treturn p.replace(/\\//g, \"\\\\\");\n\t}\n\n\texport async function readConfig(key: string, defaultValue: string) {\n\t\tconst r = await ncmFetch(\n\t\t\t`/app/read_config?key=${e(key)}&default=${e(defaultValue)}`,\n\t\t);\n\t\treturn await r.text();\n\t}\n\n\texport async function writeConfig(key: string, value: string) {\n\t\tconst r = await ncmFetch(\n\t\t\t`/app/write_config?key=${e(key)}&value=${e(value)}`,\n\t\t);\n\t\treturn await r.text();\n\t}\n\n\texport async function getNCMPath() {\n\t\tconst r = await ncmFetch(\"/app/ncmpath\");\n\t\treturn await r.text();\n\t}\n\n\texport async function showConsole() {\n\t\tconst r = await ncmFetch(\"/app/show_console\");\n\t\treturn r.status === 200;\n\t}\n\n\texport async function setRoundedCorner(enable = true) {\n\t\tconst r = await ncmFetch(`/app/set_rounded_corner?enable=${enable}`);\n\t\treturn r.status === 200;\n\t}\n\n\texport async function openFileDialog(filter: string, initialDir: string) {\n\t\tconst r = await ncmFetch(\n\t\t\t`/app/open_file_dialog?filter=${e(filter)}&initialDir=${e(initialDir)}`,\n\t\t);\n\t\treturn await r.text();\n\t}\n\n\texport async function isLightTheme() {\n\t\tconst r = await ncmFetch(\"/app/is_light_theme\");\n\t\treturn (await r.text()) === \"true\"; // TODO: \u8FD9\u91CC\u53EF\u4EE5\u7528 JSON \u4EE3\u66FF\n\t}\n\n\texport async function getSucceededHijacks() {\n\t\tconst r = await ncmFetch(\"/app/get_succeeded_hijacks\");\n\t\treturn await r.json();\n\t}\n}\n\nexport namespace ncm {\n\texport function findNativeFunction(obj: Object, identifiers: string) {\n\t\tfor (var key in obj) {\n\t\t\tvar flag = true;\n\t\t\tfor (\n\t\t\t\tvar _i = 0, identifiers_1 = identifiers;\n\t\t\t\t_i < identifiers_1.length;\n\t\t\t\t_i++\n\t\t\t) {\n\t\t\t\tvar identifier = identifiers_1[_i];\n\t\t\t\tif (!obj[key].toString().includes(identifier)) flag = false;\n\t\t\t}\n\t\t\tif (flag) return key;\n\t\t}\n\t}\n\n\texport function searchApiFunction(\n\t\tname: string,\n\t\t// rome-ignore lint/suspicious/noExplicitAny: \u6839\u5BF9\u8C61\u53EF\u4EE5\u662F\u4EFB\u610F\u7684\n\t\troot: any = window,\n\t\tcurrentPath = [\"window\"],\n\t\t// rome-ignore lint/suspicious/noExplicitAny: \u5DF2\u68C0\u7D22\u5BF9\u8C61\u53EF\u4EE5\u662F\u4EFB\u610F\u7684\n\t\tprevObjects: any[] = [],\n\t\tresult: [Function, string[]][] = [],\n\t): [Function, string[]][] {\n\t\tif (root === undefined || root === null) {\n\t\t\treturn [];\n\t\t}\n\t\tprevObjects.push(root);\n\t\tif (typeof root[name] === \"function\") {\n\t\t\tresult.push([root[name], [...currentPath]]);\n\t\t}\n\t\tif (currentPath.length < 10)\n\t\t\tfor (const key of Object.keys(root)) {\n\t\t\t\tif (\n\t\t\t\t\tObject.hasOwnProperty.call(root, key) &&\n\t\t\t\t\ttypeof root[key] === \"object\" &&\n\t\t\t\t\t!prevObjects.includes(root[key])\n\t\t\t\t) {\n\t\t\t\t\tcurrentPath.push(key);\n\t\t\t\t\tsearchApiFunction(name, root[key], currentPath, prevObjects, result);\n\t\t\t\t\tcurrentPath.pop();\n\t\t\t\t}\n\t\t\t}\n\t\tprevObjects.pop();\n\t\treturn result;\n\t}\n\n\texport function findApiFunction(\n\t\tname: string,\n\t\t// rome-ignore lint/suspicious/noExplicitAny: \u6839\u5BF9\u8C61\u53EF\u4EE5\u662F\u4EFB\u610F\u7684\n\t\troot: any = window,\n\t\tcurrentPath = [\"window\"],\n\t): [Function, string[]] | null {\n\t\tconst searchResult = searchApiFunction(name, root, currentPath);\n\t\tif (searchResult.length > 0) {\n\t\t\treturn searchResult[0];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// rome-ignore lint/suspicious/noExplicitAny: \u8FD9\u4E2A\u662F\u7F51\u6613\u4E91\u81EA\u5DF1\u66B4\u9732\u7684\u5BF9\u8C61\uFF0C\u91CC\u5934\u6709\u5F88\u591A\u53EF\u4EE5\u5229\u7528\u7684\u51FD\u6570\n\tdeclare const dc: any;\n\t// rome-ignore lint/suspicious/noExplicitAny: \u8FD9\u4E2A\u662F\u7F51\u6613\u4E91\u81EA\u5DF1\u66B4\u9732\u7684\u5BF9\u8C61\uFF0C\u91CC\u5934\u6709\u5F88\u591A\u53EF\u4EE5\u5229\u7528\u7684\u51FD\u6570\n\tdeclare const ctl: any;\n\n\tlet cachedGetPlayingFunc: Function | null = null;\n\t/**\n\t * \u83B7\u53D6\u5F53\u524D\u6B63\u5728\u64AD\u653E\u7684\u6B4C\u66F2\u7684\u4FE1\u606F\uFF0C\u5305\u62EC\u6B4C\u66F2\u4FE1\u606F\uFF0C\u6765\u6E90\uFF0C\u5F53\u524D\u64AD\u653E\u72B6\u6001\u7B49\n\t * @todo \u8865\u5168\u8FD4\u56DE\u503C\u7C7B\u578B\n\t * @returns \u5F53\u524D\u6B4C\u66F2\u7684\u64AD\u653E\u4FE1\u606F\n\t */\n\texport function getPlayingSong() {\n\t\tif (cachedGetPlayingFunc === null) {\n\t\t\tcachedGetPlayingFunc = findApiFunction(\"getPlaying\")?.[0] || null;\n\t\t\treturn null;\n\t\t}\n\t\tif (cachedGetPlayingFunc === null) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\treturn cachedGetPlayingFunc();\n\t\t}\n\t}\n\n\t/**\n\t * \u83B7\u53D6\u5F53\u524D\u6B63\u5728\u64AD\u653E\u7684\u6B4C\u66F2\u7684\u7B80\u8981\u4FE1\u606F\n\t * @deprecated \u7531\u4E8E\u627E\u5230\u4E86\u81EA\u5E26\u7684\u63A5\u53E3\uFF0C\u6545\u8FD9\u4E2A\u51FD\u6570\u88AB\u5F03\u7528\uFF0C\u8BF7\u8F6C\u800C\u4F7F\u7528 `betterncm.ncm.getPlayingSong`\n\t * @returns \u7B80\u5316\u7684\u64AD\u653E\u4FE1\u606F\n\t */\n\texport function getPlaying() {\n\t\tconst playing = getPlayingSong();\n\t\tconst result = {\n\t\t\tid: playing.data.id as number,\n\t\t\ttitle: playing.data.name as string,\n\t\t\ttype: \"normal\",\n\t\t};\n\t\tif (playing.from.fm) {\n\t\t\tresult.type = \"fm\";\n\t\t}\n\t\treturn result;\n\t}\n}\n\nnamespace utils {\n\ttype Selector =\n\t\t| keyof HTMLElementTagNameMap\n\t\t| keyof SVGElementTagNameMap\n\t\t| string;\n\texport function waitForElement<K extends keyof HTMLElementTagNameMap>(\n\t\tselector: K,\n\t\tinterval?: number,\n\t): Promise<HTMLElementTagNameMap[K] | null>;\n\texport function waitForElement<K extends keyof SVGElementTagNameMap>(\n\t\tselector: K,\n\t\tinterval?: number,\n\t): Promise<SVGElementTagNameMap[K] | null>;\n\texport function waitForElement<E extends Element = Element>(\n\t\tselector: string,\n\t\tinterval?: number,\n\t): Promise<E | null>;\n\texport function waitForElement(selector: Selector, interval = 100) {\n\t\treturn waitForFunction(() => document.querySelector(selector), interval);\n\t}\n\n\texport function waitForFunction<T>(\n\t\tfunc: () => T,\n\t\tinterval = 100,\n\t): Promise<T> {\n\t\treturn new Promise((rs) => {\n\t\t\tlet handle = setInterval(() => {\n\t\t\t\tlet result = func();\n\t\t\t\tif (result) {\n\t\t\t\t\tclearInterval(handle);\n\t\t\t\t\trs(result);\n\t\t\t\t}\n\t\t\t}, interval);\n\t\t});\n\t}\n\n\texport function delay(ms: number) {\n\t\treturn new Promise((rs) => setTimeout(rs, ms));\n\t}\n}\n\nnamespace tests {\n\texport async function fail(reason: string) {\n\t\tconsole.warn(\"Test Failed\", reason);\n\t\tawait fs.writeFileText(\"/__TEST_FAILED__.txt\", reason);\n\t}\n\n\texport async function success(message: string) {\n\t\tconsole.warn(\"Test Succeeded\", message);\n\t\tawait fs.writeFileText(\"/__TEST_SUCCEEDED__.txt\", message);\n\t}\n}\n\ndeclare const loadingMask: HTMLDivElement\nconst BetterNCM = {\n\tfs,\n\tapp,\n\tncm,\n\tutils,\n\ttests,\n\treload() {\n        const anim = loadingMask.animate([{ opacity: 0 }, { opacity: 1 }], { duration: 300, fill: 'forwards', easing: \"cubic-bezier(0.42, 0, 0.58, 1)\" });\n        anim.commitStyles();\n\n        anim.addEventListener(\"finish\", _ => {\n            document.location.reload();\n        });\n\t}\n};\n\nlocation.reload = BetterNCM.reload.bind(this)\n\ndeclare var betterncm: typeof BetterNCM;\nbetterncm = BetterNCM;\nexport default BetterNCM\n", "import betterncm from \"./betterncm-api\";\nimport ShadowRealm from \"shadowrealm-api\";\n\nexport interface InjectFile {\n\tfile: string;\n}\n\nexport interface HijackOperation {\n\ttype: string;\n}\n\nexport interface HijackReplaceOrRegexOperation extends HijackOperation {\n\ttype: \"replace\" | \"regex\";\n\tfrom: string;\n\tto: string;\n}\n\nexport interface HijackAppendOrPrependOperation extends HijackOperation {\n\ttype: \"append\" | \"prepend\";\n\tcode: string;\n}\n\nexport interface PluginManifest {\n\tmanifest_version: number;\n\tname: string;\n\tversion: string;\n\tinjects: { [pageType: string]: InjectFile };\n\thijacks: {\n\t\t[versionRange: string]: {\n\t\t\t[matchUrlPath: string]:\n\t\t\t\t| HijackReplaceOrRegexOperation\n\t\t\t\t| HijackAppendOrPrependOperation;\n\t\t};\n\t};\n}\n\nexport class NCMPlugin extends EventTarget {\n\tconstructor(manifest: PluginManifest, pluginPath: string) {\n\t\tsuper();\n\t\tthis.manifest = manifest;\n\t\tthis.pluginPath = pluginPath;\n\t\tthis.addEventListener(\"load\", (evt: CustomEvent) => {\n\t\t\tthis.injects.forEach((inject) => {\n\t\t\t\tinject.dispatchEvent(evt);\n\t\t\t});\n\t\t});\n\t\tthis.addEventListener(\"allpluginsloaded\", (evt: CustomEvent) => {\n\t\t\tthis.injects.forEach((inject) => {\n\t\t\t\tinject.dispatchEvent(evt);\n\t\t\t});\n\t\t});\n\t}\n\tpluginPath: string = \"\";\n\tinjects: NCMInjectPlugin[];\n\tmanifest: PluginManifest;\n\tfinished: boolean;\n}\n\nexport class NCMInjectPlugin extends EventTarget {\n\tpluginPath: string = \"\";\n\tmanifest: PluginManifest;\n\tconfigViewElement: HTMLElement | null = null;\n\tmainPlugin: NCMPlugin;\n\tconstructor(mainPlugin: NCMPlugin) {\n\t\tsuper();\n\t\tthis.mainPlugin = mainPlugin;\n\t\tthis.manifest = mainPlugin.manifest;\n\t\tthis.pluginPath = mainPlugin.pluginPath;\n\t}\n\n\tonLoad(fn: (selfPlugin: NCMPlugin, evt: CustomEvent) => void) {\n\t\tthis.addEventListener(\"load\", (evt: CustomEvent) => {\n\t\t\tfn(evt.detail, evt);\n\t\t});\n\t}\n\t// rome-ignore lint/suspicious/noExplicitAny: TODO: \u5DE5\u5177\u7C7B\u53C2\u6570\n\tonConfig(fn: (toolsBox: any) => HTMLElement) {\n\t\tthis.addEventListener(\"config\", (evt: CustomEvent) => {\n\t\t\tthis.configViewElement = fn(evt.detail);\n\t\t});\n\t}\n\tonAllPluginsLoaded(\n\t\tfn: (loadedPlugins: typeof window.loadedPlugins, evt: CustomEvent) => void,\n\t) {\n\t\tthis.addEventListener(\"allpluginsloaded\", (evt: CustomEvent) => {\n\t\t\tfn(evt.detail, evt);\n\t\t});\n\t}\n\tgetConfig<T>(key: string, defaultValue: T): T;\n\tgetConfig<T>(key: string, defaultValue?: T): T | undefined {\n\t\tlet config = JSON.parse(\n\t\t\tlocalStorage[`config.betterncm.${this.manifest.name}`] || \"{}\",\n\t\t);\n\t\tif (config[key] !== undefined) return config[key];\n\t\treturn defaultValue;\n\t}\n\tsetConfig<T>(key: string, value: T) {\n\t\tlet config = JSON.parse(\n\t\t\tlocalStorage[`config.betterncm.${this.manifest.name}`] || \"{}\",\n\t\t);\n\t\tconfig[key] = value;\n\t\tlocalStorage[`config.betterncm.${this.manifest.name}`] =\n\t\t\tJSON.stringify(config);\n\t}\n}\n\nexport let loadedPlugins: typeof window.loadedPlugins = {};\n\nasync function loadPlugins() {\n\t// rome-ignore lint/suspicious/noExplicitAny: AsyncFunction \u5E76\u4E0D\u66B4\u9732\u6210\u7C7B\uFF0C\u9700\u8981\u624B\u52A8\u83B7\u53D6\n\tconst AsyncFunction = async function () {}.constructor as any;\n\tconst pageMap = {\n\t\t\"/pub/app.html\": \"Main\",\n\t};\n\tconst pageName = pageMap[location.pathname];\n\n\tasync function loadPlugin(pluginPath: string, devMode = false) {\n\t\tlet manifest = JSON.parse(\n\t\t\tawait betterncm.fs.readFileText(`${pluginPath}/manifest.json`),\n\t\t);\n\t\tconst mainPlugin = new NCMPlugin(manifest, pluginPath);\n\t\tloadedPlugins[manifest.name] = mainPlugin;\n\n\t\tasync function loadInject(filePath: string) {\n\t\t\tconst getFileCode = betterncm.fs.readFileText.bind(null, filePath);\n\t\t\tlet code = await getFileCode();\n\t\t\tif (devMode) {\n\t\t\t\tsetInterval(async () => {\n\t\t\t\t\tif (code !== (await getFileCode())) betterncm.reload();\n\t\t\t\t}, 500);\n\t\t\t}\n\n\t\t\tif (filePath.endsWith(\".js\")) {\n\t\t\t\tlet plugin = new NCMInjectPlugin(mainPlugin);\n\t\t\t\tnew AsyncFunction(\"plugin\", code).call(\n\t\t\t\t\tloadedPlugins[manifest.name],\n\t\t\t\t\tplugin,\n\t\t\t\t);\n\t\t\t\tplugin.dispatchEvent(\n\t\t\t\t\tnew CustomEvent(\"load\", {\n\t\t\t\t\t\tdetail: plugin,\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tloadedPlugins[manifest.name].injects.push(plugin);\n\t\t\t}\n\t\t}\n\n\t\t// Load Injects\n\t\tif (manifest.injects[pageName]) {\n\t\t\tfor (const inject of manifest.injects[pageName]) {\n\t\t\t\tawait loadInject(`${pluginPath}/${inject.file}`);\n\t\t\t}\n\t\t}\n\n\t\tif (manifest.injects[location.pathname]) {\n\t\t\tfor (const inject of manifest.injects[location.pathname]) {\n\t\t\t\tawait loadInject(`${pluginPath}/${inject.file}`);\n\t\t\t}\n\t\t}\n\t}\n\n\tlet loadingPromises: Promise<void>[] = [];\n\tlet loadFailedErrors: [string, Error][] = [];\n\twindow.loadedPlugins = loadedPlugins;\n\twindow.loadFailedErrors = loadFailedErrors;\n\n\tlet pluginPaths = await betterncm.fs.readDir(\"./plugins_runtime\");\n\tfor (const path of pluginPaths) {\n\t\tloadingPromises.push(\n\t\t\tloadPlugin(path)\n\t\t\t\t.then(() => {})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tthrow Error(`Failed to load plugin ${path}: ${e.toString()}`);\n\t\t\t\t}),\n\t\t);\n\t}\n\n\tif (await betterncm.fs.exists(\"./plugins_dev\")) {\n\t\tlet devPluginPaths = await betterncm.fs.readDir(\"./plugins_dev\");\n\t\tfor (const path of devPluginPaths) {\n\t\t\tloadingPromises.push(\n\t\t\t\tloadPlugin(path, true)\n\t\t\t\t\t.then(() => {})\n\t\t\t\t\t.catch((e) => {\n\t\t\t\t\t\tconsole.error(`Failed to load dev plugin ${path}: ${e.toString()}`);\n\t\t\t\t\t\tloadFailedErrors.push([path, e]);\n\t\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tawait Promise.all(loadingPromises);\n\tfor (const name in loadedPlugins) {\n\t\tloadedPlugins[name].injects.forEach((v) =>\n\t\t\tv.dispatchEvent(\n\t\t\t\tnew CustomEvent(\"allpluginsloaded\", { detail: loadedPlugins }),\n\t\t\t),\n\t\t);\n\t}\n}\n\ndeclare const loadingMask: HTMLDivElement;\nwindow.addEventListener(\"DOMContentLoaded\", async () => {\n\tbetterncm.reload = () => {\n\t\tconst anim = loadingMask.animate([{ opacity: 0 }, { opacity: 1 }], {\n\t\t\tduration: 300,\n\t\t\tfill: \"forwards\",\n\t\t\teasing: \"cubic-bezier(0.42,0,0.58,1)\",\n\t\t});\n\t\tanim.commitStyles();\n\n\t\tanim.addEventListener(\"finish\", (_) => {\n\t\t\tdocument.location.reload();\n\t\t});\n\t};\n\n\tawait Promise.all([\n\t\tloadPlugins(),\n\t\tbetterncm.utils.waitForElement(\"nav\", 400),\n\t]);\n\n\tloadingMask\n\t\t.animate([{ opacity: 1 }, { opacity: 0, display: \"none\" }], {\n\t\t\tduration: 300,\n\t\t\tfill: \"forwards\",\n\t\t\teasing: \"cubic-bezier(0.42,0,0.58,1)\",\n\t\t})\n\t\t.commitStyles();\n\n\tif (!(\"PluginMarket\" in loadedPlugins)) {\n\t\tlet attempts = parseInt(\n\t\t\tlocalStorage[\"cc.microblock.loader.reloadPluginAttempts\"] || \"0\",\n\t\t);\n\t\tif (attempts < 3) {\n\t\t\tlocalStorage[\"cc.microblock.loader.reloadPluginAttempts\"] = attempts + 1;\n\t\t\tdocument.location.reload();\n\t\t} else {\n\t\t\tlocalStorage[\"cc.microblock.loader.reloadPluginAttempts\"] = \"0\";\n\t\t\talert(\n\t\t\t\t`\u63D2\u4EF6\u7BA1\u7406\u5668\u52A0\u8F7D\u5931\u8D25\uFF01\u5DF2\u91CD\u8BD5 ${attempts} \u6B21\u4ECD\u7136\u52A0\u8F7D\u5931\u8D25\u3002\\n\u8BF7\u68C0\u67E5\u662F\u5426\u6709\u4E0D\u517C\u5BB9\u63D2\u4EF6\u6216\u51B2\u7A81\u7684\u63D2\u4EF6\uFF01`,\n\t\t\t);\n\t\t}\n\t}\n});\n"],
  "mappings": "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",
  "names": ["initNCMReact", "reactHookTimer", "BETTERNCM_API_PATH", "ncmFetch", "relPath", "option", "BETTERNCM_API_PATH", "e", "fs", "readDir", "folderPath", "ncmFetch", "readFileText", "filePath", "unzip", "zipPath", "unzipDest", "writeFileText", "content", "writeFile", "mkdir", "dirPath", "exists", "path", "remove", "app", "exec", "cmd", "elevate", "showWindow", "betterNCMVersion", "getBetterNCMVersion", "takeBackgroundScreenshot", "getNCMWinPos", "reloadPlugins", "getDataPath", "readConfig", "key", "defaultValue", "writeConfig", "value", "getNCMPath", "showConsole", "setRoundedCorner", "enable", "openFileDialog", "filter", "initialDir", "isLightTheme", "getSucceededHijacks", "ncm", "findNativeFunction", "obj", "identifiers", "flag", "_i", "identifiers_1", "identifier", "searchApiFunction", "name", "root", "currentPath", "prevObjects", "result", "findApiFunction", "searchResult", "cachedGetPlayingFunc", "getPlayingSong", "getPlaying", "playing", "utils", "waitForElement", "selector", "interval", "waitForFunction", "func", "rs", "handle", "delay", "ms", "tests", "fail", "reason", "success", "message", "BetterNCM", "anim", "_", "betterncm_api_default", "NCMPlugin", "manifest", "pluginPath", "evt", "inject", "NCMInjectPlugin", "mainPlugin", "fn", "key", "defaultValue", "config", "value", "loadedPlugins", "loadPlugins", "AsyncFunction", "pageName", "loadPlugin", "devMode", "betterncm_api_default", "loadInject", "filePath", "getFileCode", "code", "plugin", "loadingPromises", "loadFailedErrors", "pluginPaths", "path", "e", "devPluginPaths", "name", "v", "anim", "_", "attempts"]
}
